<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>RubyCritic</title>
    <link href="../../../assets/stylesheets/application.css" media="screen, projection, print" rel="stylesheet" type="text/css">
    <link href="../../../assets/stylesheets/prettify.custom_theme.css" media="screen, projection, print" rel="stylesheet" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <header class="project-header group">
      <div class="container">
        <h1 class="logo"><a href="../../../overview.html" class="logo-link">RubyCritic</a></h1>
        <nav class="project-nav">
          <a href="../../../overview.html" class="project-nav-item">Overview</a>
          <a href="../../../code_index.html" class="project-nav-item">Code</a>
          <a href="../../../smells_index.html" class="project-nav-item">Smells</a>
        </nav>
      </div>
    </header>
    <div class="container">
      <div class="file-header group rated">
  <span class="rating rating-f circled-text circle">
    F
  </span>
  <h2 class="file-name">ElementArray</h2>

  <span class="file-committed-at">
    
      Updated <time class='js-timeago' datetime='2016-11-20 13:49:17 -0600'>2016-11-20 13:49:17 -0600</time>
    
  </span>

  <div class="file-stats group">
    <div class="file-stat">
      139 complexity
    </div>
    <div class="file-stat">
      N/A complexity per method
    </div>
    <div class="file-stat">
      11 churn
    </div>
    <div class="file-stat">
      0 methods
    </div>
    <div class="file-stat">
      238 duplication
    </div>
  </div>

  
    <button id="js-toggle-smells" class="smells-toggle-button button">Toggle Smells</button>
  
</div>

<code class="prettyprint linenums lang-ruby file-code js-file-code"># frozen_string_literal: true
require_relative &#39;support/parse&#39;
require_relative &#39;support/element_array&#39;
require_relative &#39;support/minitest&#39;

# Description: Provides step definitions related to element arrays

# For: Calling an element array method
# Examples:
# - I click on the first &quot;home_screen&quot; &quot;about_button&quot; element array
# - I hover over all &quot;home_screen&quot; &quot;about_button&quot; element array
# - I click on 0..9 &quot;home_screen&quot; &quot;about_button&quot; element array
# - I click on a random &quot;home_screen&quot; &quot;about_button&quot; element array
When(%r(^I (\w+|%\{\w+\})?(?: on| over)?(?: the| a)? (%\{\w+\}|all|random|last|first|(\d+)\.\.(\d+)) &quot;(\w+|%\{\w+\})&quot; &quot;(\w+|%\{\w+\})&quot; element array$)) do |*args|<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flay/" target="_blank">DuplicateCode</a>)      Similar code found in 4 nodes                        <a href="element_array.html#L14" class="js-smell-location">0</a>                  <a href="element_array.html#L27" class="js-smell-location">1</a>                  <a href="element_hash.html#L11" class="js-smell-location">2</a>                  <a href="element_hash.html#L24" class="js-smell-location">3</a>                  </span>  </li></ul>
  method, key, low_range, high_range, screen, element = AutomationObject::StepDefinitions::Parse.new(args).get

  AutomationObject::StepDefinitions::ElementArray.iterate_and_do(
    screen, element, key, low_range, high_range
  ) do |sub_element|
    sub_element.send(method)
  end
end

# For: Typing into element array field
# Examples:
# - I type &quot;blah&quot; into the first &quot;home_screen&quot; &quot;text_field&quot; element array
When(%r(^I type &quot;([\w\s]+|%\{\w+\})&quot; in(?:to| to)? (?:the )?(%\{\w+\}|random|last|first|(\d+)\.\.(\d+)) &quot;(\w+|%\{\w+\})&quot; &quot;(\w+|%\{\w+\})&quot; element array$)) do |*args|<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flay/" target="_blank">DuplicateCode</a>)      Similar code found in 4 nodes                        <a href="element_array.html#L14" class="js-smell-location">0</a>                  <a href="element_array.html#L27" class="js-smell-location">1</a>                  <a href="element_hash.html#L11" class="js-smell-location">2</a>                  <a href="element_hash.html#L24" class="js-smell-location">3</a>                  </span>  </li></ul>
  text, key, low_range, high_range, screen, element = AutomationObject::StepDefinitions::Parse.new(args).get

  AutomationObject::StepDefinitions::ElementArray.iterate_and_do(
    screen, element, key, low_range, high_range
  ) do |sub_element|
    sub_element.send_keys(text)
  end
end

# For: Scrolling element array item(s) into focus
# Examples:
# - I scroll to the first &quot;home_screen&quot; &quot;logo_button&quot; element array
When(%r(^I (?:scroll |focus )(?:to |through )(?:the )?(%\{\w+\}|all|random|last|first|(\d+)\.\.(\d+)) &quot;(\w+|%\{\w+\})&quot; &quot;(\w+|%\{\w+\})&quot; element array$)) do |*args|<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flay/" target="_blank">DuplicateCode</a>)      Similar code found in 2 nodes                        <a href="element_array.html#L40" class="js-smell-location">0</a>                  <a href="element_hash.html#L37" class="js-smell-location">1</a>                  </span>  </li></ul>
  key, low_range, high_range, screen, element = AutomationObject::StepDefinitions::Parse.new(args).get

  AutomationObject::StepDefinitions::ElementArray.iterate_and_do(
    screen, element, key, low_range, high_range, &amp;:scroll_into_view
  )
end

# For: Saving value from element array for use later
# Examples:
# - I save &quot;text&quot; as &quot;unique_value&quot; from the first &quot;home_screen&quot; &quot;logo_button&quot; element array
When(%r(^I save &quot;(\w+|%\{\w+\})&quot; as &quot;(\w+)&quot; from (?:the )?(%\{\w+\}|all|random|last|first|(\d+)\.\.(\d+)) &quot;(\w+|%\{\w+\})&quot; &quot;(\w+|%\{\w+\})&quot; element array$)) do |*args|<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flay/" target="_blank">DuplicateCode</a>)      Similar code found in 2 nodes                        <a href="element_array.html#L51" class="js-smell-location">0</a>                  <a href="element_hash.html#L48" class="js-smell-location">1</a>                  </span>  </li></ul>
  method, value_key, key, low_range, high_range, screen, element = AutomationObject::StepDefinitions::Parse.new(args).get

  AutomationObject::StepDefinitions::ElementArray.iterate_and_do(
    screen, element, key, low_range, high_range
  ) do |sub_element|
    value = sub_element.send(method)
    AutomationObject::StepDefinitions::Cache.set(value_key, value)
  end
end

# For: Testing the element arrays size
# Examples:
# - the &quot;home_screen&quot; &quot;title&quot; element array should be greater than 0
Then(%r(^(?:the )?&quot;(\w+|%\{\w+\})&quot; &quot;(\w+|%\{\w+\})&quot; element array should(n&#39;t|not)? (?:be )?(larger th[ae]n|greater th[ae]n|less th[ae]n|smaller th[ae]n|equals?) (?:to )?(\d+)$)) do |*args|<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flog/" target="_blank">HighComplexity</a>)      Then#/^(?:the )?"(\w+|%\{\w+\})" "(\w+|%\{\w+\})" element array should(n't|not)? (?:be )?(larger th[ae]n|greater th[ae]n|less th[ae]n|smaller th[ae]n|equals?) (?:to )?(\d+)$/ has a flog score of 44          </span>  </li></ul>
  screen, element, negative, comparison, expected_value = AutomationObject::StepDefinitions::Parse.new(args).get

  element_array = AutomationObject::Framework.get.send(screen).send(element)
  assert element_array.is_a?(Array)

  if comparison =~ /larger th[ae]n|greater th[ae]n/
    if negative
      refute expected_value &lt; element_array.length
    else
      assert expected_value &lt; element_array.length
    end
  elsif comparison =~ /smaller th[ae]n|less th[ae]n/
    if negative
      refute expected_value &gt; element_array.length
    else
      assert expected_value &gt; element_array.length
    end
  elsif comparison =~ /equals?/
    if negative
      refute_equals expected_value, element_array.length
    else
      assert_equals expected_value, element_array.length
    end
  end
end

# For: Testing if the element method value equals a given value
# Examples:
# - the first &quot;home_screen&quot; &quot;title&quot; element array &quot;text&quot; should equal &quot;Home&quot;
# - the last &quot;home_screen&quot; &quot;title&quot; element array &quot;text&quot; shouldn&#39;t equal &quot;Home&quot;
# - the random &quot;home_screen&quot; &quot;title&quot; element array &quot;text&quot; should not equal &quot;Home&quot;
# - the 0..9 &quot;home_screen&quot; &quot;title&quot; element array &quot;text&quot; should equal &quot;Home&quot;
# - the all &quot;home_screen&quot; &quot;title&quot; element array &quot;text&quot; should not equal &quot;Home&quot;
Then(%r(^(?:the )?(%\{\w+\}|all|random|last|first|(\d+)\.\.(\d+)) &quot;(\w+|%\{\w+\})&quot; &quot;(\w+|%\{\w+\})&quot; element array &quot;(\w+|%\{\w+\})&quot; should?(n&#39;t| not)? equal &quot;(\w+|%\{\w+\})&quot;$)) do |*args|<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flay/" target="_blank">DuplicateCode</a>)      Similar code found in 2 nodes                        <a href="element_array.html#L99" class="js-smell-location">0</a>                  <a href="element_hash.html#L92" class="js-smell-location">1</a>                  </span>  </li></ul>
  key, low_range, high_range, screen, element, method, negative, expected_value = AutomationObject::StepDefinitions::Parse.new(args).get

  AutomationObject::StepDefinitions::ElementArray.iterate_and_do(
    screen, element, key, low_range, high_range
  ) do |sub_element|
    value = sub_element.send(method)

    if negative
      refute_equals expected_value, value
    else
      assert_equals expected_value, value
    end
  end
end

# For: Testing if the element arrays uniqueness
# Examples:
# - the &quot;home_screen&quot; &quot;title&quot; element array &quot;text&quot; should be unique
# - the &quot;home_screen&quot; &quot;title&quot; element array &quot;text&quot; should not be unique
# - the &quot;home_screen&quot; &quot;title&quot; element array &quot;text&quot; shouldn&#39;t be unique
Then(%r(^(?:the )?&quot;(\w+|%\{\w+\})&quot; &quot;(\w+|%\{\w+\})&quot; element array &quot;(\w+|%\{\w+\})&quot; should(n&#39;t| not)? be unique$)) do |*args|<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flay/" target="_blank">DuplicateCode</a>)      Similar code found in 2 nodes                        <a href="element_array.html#L120" class="js-smell-location">0</a>                  <a href="element_hash.html#L111" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flog/" target="_blank">HighComplexity</a>)      Then#/^(?:the )?"(\w+|%\{\w+\})" "(\w+|%\{\w+\})" element array "(\w+|%\{\w+\})" should(n't| not)? be unique$/ has a flog score of 30          </span>  </li></ul>
  screen, element, method, negative = AutomationObject::StepDefinitions::Parse.new(args).get

  element_array = AutomationObject::Framework.get.send(screen).send(element)
  assert element_array.is_a?(Array)

  values = []
  element_array.each do |sub_element|
    values.push(sub_element.send(method))
  end

  if negative
    refute_equals values.uniq, values
  else
    assert_equals values.uniq, values
  end
end
</code>

    </div>
    <script src='../../../assets/javascripts/jquery-2.1.0.js'></script>
    <script src='../../../assets/javascripts/jquery.tablesorter.js'></script>
    <script src='../../../assets/javascripts/jquery.floatThead-v1.2.7.js'></script>
    <script src='../../../assets/javascripts/jquery.timeago-v1.4.1.js'></script>
    <script src='../../../assets/javascripts/highcharts.src-4.0.1.js'></script>
    <script src='../../../assets/javascripts/jquery.scrollTo-1.4.11.js'></script>
    <script src='../../../assets/javascripts/prettify-4-Mar-2013.js'></script>
    <script src='../../../assets/javascripts/application.js'></script>
  </body>
</html>
